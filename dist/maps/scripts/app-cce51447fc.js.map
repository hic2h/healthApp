{"version":3,"sources":["scripts/app.js"],"names":["angular","module","navbar","NavbarController","Auth","$state","vm","this","isLoggedIn","logout","$inject","directive","restrict","templateUrl","scope","creationDate","controller","controllerAs","bindToController","UtilService","$window","Util","safeCb","cb","isFunction","noop","urlParse","url","a","document","createElement","href","host","isSameOrigin","origins","concat","map","push","location","filter","o","hostnameCheck","hostname","protocolCheck","protocol","portCheck","port","length","factory","$http","$q","$timeout","apiBaseUrl","recipes","option","get","recipe","id","saveRecipe","put","deleteRecipe","$rootScope","$cookies","$injector","$log","state","request","config","headers","responseError","response","status","go","remove","reject","$location","currentUser","login","user","callback","post","password","then","res","data","success","token","err","getToken","detailsController","$scope","recipesService","$stateParams","deleteIngredientLines","obj","$index","confirm","ingredientLines","splice","MainController","LoginController","errorMsg","message","console","log","checkAuth","run","routerConfig","$stateProvider","$urlRouterProvider","otherwise","constant","$logProvider","$locationProvider","$httpProvider","debugEnabled","html5Mode","interceptors","$templateCache"],"mappings":"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","file":"scripts/app-cce51447fc.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('healtApp', ['ngCookies', 'ngResource', 'ui.router', 'ui.bootstrap']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('healtApp')\n    .directive('navbar', navbar);\n\n  /** @ngInject */\n  function navbar() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/navbar/navbar.html',\n      scope: {\n          creationDate: '='\n      },\n      controller: NavbarController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NavbarController(Auth, $state) {\n      var vm = this;\n\n      vm.isLoggedIn = Auth.isLoggedIn;\n\n      vm.logout = function(){\n        Auth.logout();\n      };\n\n    }\n  }\n\n})();\n\n'use strict';\n\n(function() {\n\n  /**\n   * The Util service is for thin, globally reusable, utility functions\n   */\n  function UtilService($window) {\n    var Util = {\n      /**\n       * Return a callback or noop function\n       *\n       * @param  {Function|*} cb - a 'potential' function\n       * @return {Function}\n       */\n      safeCb: function(cb) {\n        return angular.isFunction(cb) ? cb : angular.noop;\n      },\n\n      /**\n       * Parse a given url with the use of an anchor element\n       *\n       * @param  {String} url - the url to parse\n       * @return {Object}     - the parsed url, anchor element\n       */\n      urlParse: function(url) {\n        var a = document.createElement('a');\n        a.href = url;\n\n        // Special treatment for IE, see http://stackoverflow.com/a/13405933 for details\n        if (a.host === '') {\n          a.href = a.href;\n        }\n\n        return a;\n      },\n\n      /**\n       * Test whether or not a given url is same origin\n       *\n       * @param  {String}           url       - url to test\n       * @param  {String|String[]}  [origins] - additional origins to test against\n       * @return {Boolean}                    - true if url is same origin\n       */\n      isSameOrigin: function(url, origins) {\n        url = Util.urlParse(url);\n        origins = origins && [].concat(origins) || [];\n        origins = origins.map(Util.urlParse);\n        origins.push($window.location);\n        origins = origins.filter(function(o) {\n          var hostnameCheck = url.hostname === o.hostname;\n          var protocolCheck = url.protocol === o.protocol;\n          // 2nd part of the special treatment for IE fix (see above):\n          // This part is when using well-known ports 80 or 443 with IE,\n          // when $window.location.port==='' instead of the real port number.\n          // Probably the same cause as this IE bug: https://goo.gl/J9hRta\n          var portCheck = url.port === o.port || o.port === '' && (url.port === '80' || url\n            .port === '443');\n          return hostnameCheck && protocolCheck && portCheck;\n        });\n        return origins.length >= 1;\n      }\n    };\n\n    return Util;\n  }\n\n  angular.module('healtApp')\n    .factory('Util', UtilService);\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('healtApp')\n    .factory('recipesService', function ($http, $q, $timeout, apiBaseUrl) {\n      return {\n        recipes: function (option) {\n          option = option || {};\n          return $http.get(apiBaseUrl + '/api/v1/recipes ', option);\n        },\n\n        recipe: function (id) {\n          return $http.get(apiBaseUrl + '/api/v1/recipe/' + id);\n        },\n\n        saveRecipe: function (id, option) {\n          option = option || {};\n          return $http.put(apiBaseUrl + '/api/v1/recipe/' + id, option);\n        },\n\n        deleteRecipe: function (id) {\n          return $http.delete(apiBaseUrl + '/api/v1/recipe/' + id);\n        }\n      };\n    });\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('healtApp')\n    .factory('authInterceptor', function ($rootScope, $q, $cookies, $injector, Util, $log) {\n      var state;\n      return {\n        // Add authorization token to headers\n        request: function(config) {\n          config.headers = config.headers || {};\n          if ($cookies.get('token')) {\n            config.headers['x-access-token'] = $cookies.get('token');\n          }\n          return config;\n        },\n\n        // Intercept 401s and redirect you to login\n        responseError: function(response) {\n          if (response.status === 401) {\n            (state || (state = $injector.get('$state')))\n              .go('signin');\n            // remove any stale tokens\n            $cookies.remove('token');\n          }\n          return $q.reject(response);\n        }\n      };\n    });\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('healtApp')\n    .factory('Auth', function ($location, $http, $cookies, $q, apiBaseUrl) {\n      var currentUser = false;\n      if ($cookies.get('token')) {\n        currentUser = true;\n      }\n\n      return {\n\n        /**\n         * Authenticate user and save token\n         *\n         * @param  {Object}   user     - login info\n         * @param  {Function} callback - optional, function(error, user)\n         * @return {Promise}\n         */\n        login: function (user, callback) {\n          return $http.post(apiBaseUrl + '/api/v1/authenticate', {\n              id: user.id,\n              password: user.password\n            })\n            .then(function (res) {\n              if(res.data && res.data.success === true) $cookies.put('token', res.data.token);\n              currentUser = true;\n              callback(null, res.data);\n            })\n            .catch(function (err) {\n              callback(err.data);\n            });\n        },\n        /**\n         * Delete access token and user info\n         */\n        logout: function () {\n          $cookies.remove('token');\n          currentUser = false;\n        },\n\n        /**\n         * Check if a user is logged in\n         *   (synchronous|asynchronous)\n         *\n         * @param  {Function|*} callback - optional, function(is)\n         * @return {Bool|Promise}\n         */\n        isLoggedIn: function () {\n          return currentUser;\n        },\n\n        /**\n         * Get auth token\n         *\n         * @return {String} - a token string used for authenticating\n         */\n        getToken: function () {\n          return $cookies.get('token');\n        }\n\n      };\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('healtApp')\n    .controller('detailsController', detailsController);\n\n  /** @ngInject */\n  function detailsController($scope, Auth, $state, recipesService, $window, $stateParams) {\n    var vm = this;\n\n    if (!Auth.isLoggedIn()) {\n      return $state.go('login');\n    }\n\n    recipesService.recipe($stateParams.id).success(function(response){\n      vm.recipe = response;\n    });\n\n    vm.deleteIngredientLines = function(obj, $index){\n      if (!$window.confirm('Are you sure you want to delete this Recipe??')) {\n        return;\n      }\n      vm.recipe.ingredientLines.splice($index, 1);\n    };\n\n    vm.saveRecipe = function(){\n      recipesService.saveRecipe($stateParams.id, vm.recipe).success(function(response){\n        $state.go('home');\n      });\n    };\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('healtApp')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController($scope, Auth, $state, recipesService, $window) {\n    var vm = this;\n\n    if (!Auth.isLoggedIn()) {\n      return $state.go('login');\n    }\n\n    recipesService.recipes().success(function(response){\n      vm.recipes = response;\n    });\n\n    vm.delete = function(id){\n      if (!$window.confirm('Are you sure you want to delete this Recipe??')) {\n        return;\n      }\n      recipesService.deleteRecipe(id).success(function(response){\n        recipesService.recipes().success(function(response){\n          vm.recipes = response;\n        });\n      });\n    };\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('healtApp')\n    .controller('LoginController', LoginController);\n\n  /** @ngInject */\n  function LoginController(Auth, $state) {\n    var vm = this;\n\n    vm.login = function(id, password){\n      vm.errorMsg = \"\";\n      Auth.login({id: id, password: password}, function(err, response){\n        if(err) vm.errorMsg = err;\n        else if(response.success === false ) vm.errorMsg = response.message;\n        else $state.go('home');\n        console.log(response);\n      });\n    };\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('healtApp')\n    .run(checkAuth);\n\n  /** @ngInject */\n  function checkAuth($rootScope, $location, $state, Auth) {\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('healtApp')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      })\n      .state('details', {\n        url: '/recipe/:id',\n        templateUrl: 'app/recipeDetail/details.html',\n        controller: 'detailsController',\n        controllerAs: 'vm'\n      })\n      .state('login', {\n      url: '/login',\n      templateUrl: 'app/login/login.html',\n      controller: 'LoginController',\n      controllerAs: 'vm'\n    });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global malarkey:false, moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('healtApp')\n    .constant('apiBaseUrl', 'https://remissionaire-staging.herokuapp.com')\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('healtApp')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, $locationProvider, $httpProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    $locationProvider.html5Mode(true);\n\n    $httpProvider.interceptors.push('authInterceptor');\n  }\n\n})();\n\nangular.module(\"healtApp\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/login/login.html\",\"<div class=container><div class=\\\"login-panel panel panel-default\\\"><div class=panel-heading><h3 class=panel-title>Sign In</h3></div><div class=panel-body><form role=form ng-submit=\\\"vm.login(vm.id, vm.password)\\\"><h3 class=text-danger>{{vm.errorMsg}}</h3><fieldset><div class=form-group><input class=form-control placeholder=E-mail ng-model=vm.id type=text autofocus></div><div class=form-group><input class=form-control placeholder=Password ng-model=vm.password type=password></div><button type=submit class=\\\"btn btn-sm btn-success\\\">Login</button></fieldset></form></div></div></div>\");\n$templateCache.put(\"app/main/main.html\",\"<div class=container><div class=row><div class=col-md-8><div class=page-header></div><div class=comments-list ng-repeat=\\\"recipe in main.recipes\\\"><div class=media><a class=media-left href=#><img ng-src={{recipe.image}} width=82px></a><div class=media-body><h4 class=\\\"media-heading user_name\\\">{{recipe.label}}</h4><p>Calories: {{recipe.calories}}</p><p>Yield: {{recipe.yield}}</p><p>Provider: {{recipe.provider}}</p><p><span ng-repeat=\\\"label in recipe.healthLabels\\\">{{label}} | </span></p><p><small><a class=text-danger href=\\\"\\\" ng-click=main.delete(recipe._id)>Delete</a> - <a ui-sref=\\\"details({id: recipe._id})\\\">Edit</a></small></p></div></div></div></div></div></div>\");\n$templateCache.put(\"app/recipeDetail/details.html\",\"<div class=container><div class=row><div class=col-md-8><h2>Edit Recipe</h2><form class=form-horizontal ng-submit=vm.saveRecipe()><div class=form-group><label>Label:</label><input type=text ng-model=vm.recipe.label></div><div class=form-group><label>provider:</label><input type=text ng-model=vm.recipe.provider></div><h3>Ingredient Lines:</h3><div ng-repeat=\\\"ingredientLines in vm.recipe.ingredientLines\\\"><div>{{ingredientLines.line}}</div><div>{{ingredientLines.slug}}</div><small><a class=text-danger href=\\\"\\\" ng-click=\\\"vm.deleteIngredientLines(ingredientLines, $index)\\\">Delete</a></small></div><button type=submit>Save</button></form></div></div></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<nav class=\\\"navbar navbar-static-top navbar-inverse\\\"><div class=container-fluid><div class=navbar-header><a class=navbar-brand href=/ ><span class=\\\"glyphicon glyphicon-home\\\"></span> Health App</a></div><div class=\\\"collapse navbar-collapse\\\" id=bs-example-navbar-collapse-6><ul class=\\\"nav navbar-nav\\\"><li class=active><a ng-href=#>Home</a></li></ul><ul class=\\\"nav navbar-nav navbar-right\\\"><li><a ui-sref=login ng-hide=vm.isLoggedIn()>Login</a></li><li><a href=\\\"\\\" ng-click=vm.logout() ng-show=vm.isLoggedIn()>Logout</a></li></ul></div></div></nav>\");}]);"],"sourceRoot":"/source/"}