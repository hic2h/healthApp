!function(){"use strict";angular.module("healtApp",["ngCookies","ngResource","ui.router","ui.bootstrap"])}(),function(){"use strict";function e(){function e(e,t){var n=this;n.isLoggedIn=e.isLoggedIn,n.logout=function(){e.logout()}}e.$inject=["Auth","$state"];var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("healtApp").directive("navbar",e)}(),function(){function e(e){var t={safeCb:function(e){return angular.isFunction(e)?e:angular.noop},urlParse:function(e){var t=document.createElement("a");return t.href=e,""===t.host&&(t.href=t.href),t},isSameOrigin:function(n,i){return n=t.urlParse(n),i=i&&[].concat(i)||[],i=i.map(t.urlParse),i.push(e.location),i=i.filter(function(e){var t=n.hostname===e.hostname,i=n.protocol===e.protocol,r=n.port===e.port||""===e.port&&("80"===n.port||"443"===n.port);return t&&i&&r}),i.length>=1}};return t}e.$inject=["$window"],angular.module("healtApp").factory("Util",e)}(),function(){"use strict";angular.module("healtApp").factory("recipesService",["$http","$q","$timeout","apiBaseUrl",function(e,t,n,i){return{recipes:function(t){return t=t||{},e.get(i+"/api/v1/recipes ",t)},recipe:function(t){return e.get(i+"/api/v1/recipe/"+t)},saveRecipe:function(t,n){return n=n||{},e.put(i+"/api/v1/recipe/"+t,n)},deleteRecipe:function(t){return e["delete"](i+"/api/v1/recipe/"+t)}}}])}(),function(){"use strict";angular.module("healtApp").factory("authInterceptor",["$rootScope","$q","$cookies","$injector","Util","$log",function(e,t,n,i,r,o){var a;return{request:function(e){return e.headers=e.headers||{},n.get("token")&&(e.headers["x-access-token"]=n.get("token")),e},responseError:function(e){return 401===e.status&&((a||(a=i.get("$state"))).go("signin"),n.remove("token")),t.reject(e)}}}])}(),function(){"use strict";angular.module("healtApp").factory("Auth",["$location","$http","$cookies","$q","apiBaseUrl",function(e,t,n,i,r){var o=!1;return n.get("token")&&(o=!0),{login:function(e,i){return t.post(r+"/api/v1/authenticate",{id:e.id,password:e.password}).then(function(e){e.data&&e.data.success===!0&&n.put("token",e.data.token),o=!0,i(null,e.data)})["catch"](function(e){i(e.data)})},logout:function(){n.remove("token"),o=!1},isLoggedIn:function(){return o},getToken:function(){return n.get("token")}}}])}(),function(){"use strict";function e(e,t,n,i,r,o){var a=this;return t.isLoggedIn()?(i.recipe(o.id).success(function(e){a.recipe=e}),a.deleteIngredientLines=function(e,t){r.confirm("Are you sure you want to delete this Recipe??")&&a.recipe.ingredientLines.splice(t,1)},void(a.saveRecipe=function(){i.saveRecipe(o.id,a.recipe).success(function(e){n.go("home")})})):n.go("login")}e.$inject=["$scope","Auth","$state","recipesService","$window","$stateParams"],angular.module("healtApp").controller("detailsController",e)}(),function(){"use strict";function e(e,t,n,i,r){var o=this;return t.isLoggedIn()?(i.recipes().success(function(e){o.recipes=e}),void(o["delete"]=function(e){r.confirm("Are you sure you want to delete this Recipe??")&&i.deleteRecipe(e).success(function(e){i.recipes().success(function(e){o.recipes=e})})})):n.go("login")}e.$inject=["$scope","Auth","$state","recipesService","$window"],angular.module("healtApp").controller("MainController",e)}(),function(){"use strict";function e(e,t){var n=this;n.login=function(i,r){n.errorMsg="",e.login({id:i,password:r},function(e,i){e?n.errorMsg=e:i.success===!1?n.errorMsg=i.message:t.go("home"),console.log(i)})}}e.$inject=["Auth","$state"],angular.module("healtApp").controller("LoginController",e)}(),function(){"use strict";function e(e,t,n,i){}e.$inject=["$rootScope","$location","$state","Auth"],angular.module("healtApp").run(e)}(),function(){"use strict";function e(e,t){e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("details",{url:"/recipe/:id",templateUrl:"app/recipeDetail/details.html",controller:"detailsController",controllerAs:"vm"}).state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController",controllerAs:"vm"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("healtApp").config(e)}(),function(){"use strict";angular.module("healtApp").constant("apiBaseUrl","https://remissionaire-staging.herokuapp.com")}(),function(){"use strict";function e(e,t,n){e.debugEnabled(!0),t.html5Mode(!0),n.interceptors.push("authInterceptor")}e.$inject=["$logProvider","$locationProvider","$httpProvider"],angular.module("healtApp").config(e)}(),angular.module("healtApp").run(["$templateCache",function(e){e.put("app/login/login.html",'<div class=container><div class="login-panel panel panel-default"><div class=panel-heading><h3 class=panel-title>Sign In</h3></div><div class=panel-body><form role=form ng-submit="vm.login(vm.id, vm.password)"><h3 class=text-danger>{{vm.errorMsg}}</h3><fieldset><div class=form-group><input class=form-control placeholder=E-mail ng-model=vm.id type=text autofocus></div><div class=form-group><input class=form-control placeholder=Password ng-model=vm.password type=password></div><button type=submit class="btn btn-sm btn-success">Login</button></fieldset></form></div></div></div>'),e.put("app/main/main.html",'<div class=container><div class=row><div class=col-md-8><div class=page-header></div><div class=comments-list ng-repeat="recipe in main.recipes"><div class=media><a class=media-left href=#><img ng-src={{recipe.image}} width=82px></a><div class=media-body><h4 class="media-heading user_name">{{recipe.label}}</h4><p>Calories: {{recipe.calories}}</p><p>Yield: {{recipe.yield}}</p><p>Provider: {{recipe.provider}}</p><p><span ng-repeat="label in recipe.healthLabels">{{label}} | </span></p><p><small><a class=text-danger href="" ng-click=main.delete(recipe._id)>Delete</a> - <a ui-sref="details({id: recipe._id})">Edit</a></small></p></div></div></div></div></div></div>'),e.put("app/recipeDetail/details.html",'<div class=container><div class=row><div class=col-md-8><h2>Edit Recipe</h2><form class=form-horizontal ng-submit=vm.saveRecipe()><div class=form-group><label>Label:</label><input type=text ng-model=vm.recipe.label></div><div class=form-group><label>provider:</label><input type=text ng-model=vm.recipe.provider></div><h3>Ingredient Lines:</h3><div ng-repeat="ingredientLines in vm.recipe.ingredientLines"><div>{{ingredientLines.line}}</div><div>{{ingredientLines.slug}}</div><small><a class=text-danger href="" ng-click="vm.deleteIngredientLines(ingredientLines, $index)">Delete</a></small></div><button type=submit>Save</button></form></div></div></div>'),e.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse"><div class=container-fluid><div class=navbar-header><a class=navbar-brand href=/ ><span class="glyphicon glyphicon-home"></span> Health App</a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-6><ul class="nav navbar-nav"><li class=active><a ng-href=#>Home</a></li></ul><ul class="nav navbar-nav navbar-right"><li><a ui-sref=login ng-hide=vm.isLoggedIn()>Login</a></li><li><a href="" ng-click=vm.logout() ng-show=vm.isLoggedIn()>Logout</a></li></ul></div></div></nav>')}]);
//# sourceMappingURL=../maps/scripts/app-cce51447fc.js.map
